generator client {
  provider = "prisma-client"
  output   = "./generated/prisma"
}

datasource db {
  provider = "mysql"
}

model jadwal {
   id         String  @id @default(uuid()) @db.Char(36)
  activity    String
  description String
  date        DateTime @default(now())
  start_time  String
  end_time    String
  is_active   Boolean
}

model jurusan {
  id           String  @id @default(uuid()) @db.Char(36)
  nama_jurusan String
  kelas        kelas[]
}

model kehadiran {
  id          String  @id @default(uuid()) @db.Char(36)
  date        DateTime  @default(now())
  siswaId     String    @db.Char(36)
  kelasId     String    @db.Char(36)
  pelajaranId String    @db.Char(36)
  status      String
  kelas       kelas     @relation(fields: [kelasId], references: [id], map: "Kehadiran_kelasId_fkey")
  pelajaran   pelajaran @relation(fields: [pelajaranId], references: [id], map: "Kehadiran_pelajaranId_fkey")
  siswa       siswa     @relation(fields: [siswaId], references: [id], map: "Kehadiran_siswaId_fkey")

  @@index([kelasId], map: "Kehadiran_kelasId_fkey")
  @@index([pelajaranId], map: "Kehadiran_pelajaranId_fkey")
  @@index([siswaId], map: "Kehadiran_siswaId_fkey")
}

model kelas {
   id          String  @id @default(uuid()) @db.Char(36)
  jurusanId    String        @db.Char(36)
  wali_kelasId String        @db.Char(36)
  nama_kelas   String
  kehadiran    kehadiran[]
  jurusan      jurusan       @relation(fields: [jurusanId], references: [id], onDelete: Cascade, map: "Kelas_jurusanId_fkey")
  wali_kelas   wali_kelas    @relation(fields: [wali_kelasId], references: [id], map: "Kelas_wali_kelasId_fkey")
  nilai_siswa  nilai_siswa[]
  pelajaran    pelajaran[]
  siswa        siswa[]

  @@index([jurusanId], map: "Kelas_jurusanId_fkey")
  @@index([wali_kelasId], map: "Kelas_wali_kelasId_fkey")
}

model nilai_siswa {
   id         String  @id @default(uuid()) @db.Char(36)
  siswaId     String    @db.Char(36)
  kelasId     String    @db.Char(36)
  pelajaranId String    @db.Char(36)
  tugas       Int
  uts         Int
  uas         Int
  rata_rata   Int
  kelas       kelas     @relation(fields: [kelasId], references: [id], map: "Nilai_Siswa_kelasId_fkey")
  pelajaran   pelajaran @relation(fields: [pelajaranId], references: [id], map: "Nilai_Siswa_pelajaranId_fkey")
  siswa       siswa     @relation(fields: [siswaId], references: [id], map: "Nilai_Siswa_siswaId_fkey")

  @@index([kelasId], map: "Nilai_Siswa_kelasId_fkey")
  @@index([pelajaranId], map: "Nilai_Siswa_pelajaranId_fkey")
  @@index([siswaId], map: "Nilai_Siswa_siswaId_fkey")
}

model pelajaran {
  id             String  @id @default(uuid()) @db.Char(36)
  kelasId        String        @db.Char(36)
  wali_kelasId   String        @db.Char(36)
  nama_pelajaran String
  kehadiran      kehadiran[]
  nilai_siswa    nilai_siswa[]
  kelas          kelas         @relation(fields: [kelasId], references: [id], map: "Pelajaran_kelasId_fkey")
  wali_kelas     wali_kelas    @relation(fields: [wali_kelasId], references: [id], map: "Pelajaran_wali_kelasId_fkey")

  @@index([kelasId], map: "Pelajaran_kelasId_fkey")
  @@index([wali_kelasId], map: "Pelajaran_wali_kelasId_fkey")
}

model siswa {
  id          String  @id @default(uuid()) @db.Char(36)
  nama        String
  kelasId     String        @db.Char(36)
  jkl         String
  kehadiran   kehadiran[]
  nilai_siswa nilai_siswa[]
  kelas       kelas         @relation(fields: [kelasId], references: [id], map: "Siswa_kelasId_fkey")

  @@index([kelasId], map: "Siswa_kelasId_fkey")
}

model wali_kelas {
  id        String  @id @default(uuid()) @db.Char(36)
  nama      String
  telp      String
  email     String
  jkl       String
  kelas     kelas[]
  pelajaran pelajaran[]
}
